<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¯„è®ºå›è½¦å‘å¸ƒ</title>
  <style>
    .wrapper {
      min-width: 400px;
      max-width: 800px;
      display: flex;
      justify-content: flex-end;
    }

    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      overflow: hidden;
      background: url(./images/avatar.jpg) no-repeat center / cover;
      margin-right: 20px;
    }

    .wrapper textarea {
      outline: none;
      border-color: transparent;
      resize: none;
      background: #f5f5f5;
      border-radius: 4px;
      flex: 1;
      padding: 10px;
      transition: all 0.5s;
      height: 30px;
    }

    .wrapper textarea:focus { /*â­ï¸CSSçš„ä¼ªç±»é€‰æ‹©å™¨ï¼šfocusï¼Œè·å–ç„¦ç‚¹åæ”¹å˜æ ·å¼ï¼Œæ·¡å…¥æ·¡å‡ºæ•ˆæœ*/
      border-color: #e4e4e4;
      background: #fff;
      height: 50px;
    }

    .wrapper button {
      background: #00aeec;
      color: #fff;
      border: none;
      border-radius: 4px;
      margin-left: 10px;
      width: 70px;
      cursor: pointer;
    }

    .wrapper .total {
      margin-right: 80px;
      color: #999;
      margin-top: 5px;
      opacity: 0;
      transition: all 0.5s;
    }

    .list {
      min-width: 400px;
      max-width: 800px;
      display: flex;
    }

    .list .item {
      width: 100%;
      display: flex;
    }

    .list .item .info {
      flex: 1;
      border-bottom: 1px dashed #e4e4e4;
      padding-bottom: 10px;
    }

    .list .item p {
      margin: 0;
    }

    .list .item .name {
      color: #FB7299;
      font-size: 14px;
      font-weight: bold;
    }

    .list .item .text {
      color: #333;
      padding: 10px 0;
    }

    .list .item .time {
      color: #999;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <i class="avatar"></i>
    <textarea id="tx" placeholder="å‘ä¸€æ¡å‹å–„çš„è¯„è®º" rows="2" maxlength="200"></textarea>
    <button>å‘å¸ƒ</button>
  </div>
  <div class="wrapper">
    <span class="total">0/200å­—</span>
  </div>
  <div class="list">
    <div class="item" style="display: none;">
      <i class="avatar"></i>
      <div class="info">
        <p class="name">æ¸…é£å¾æ¥</p>
        <p class="text">å¤§å®¶éƒ½è¾›è‹¦å•¦ï¼Œæ„Ÿè°¢å„ä½å¤§å¤§çš„åŠªåŠ›ï¼Œèƒ½åœ†æ»¡å®ŒæˆçœŸæ˜¯å¤ªå¥½äº†[ç¬‘å“­][æ”¯æŒ]</p>
        <p class="time">2022-10-10 20:29:21</p>
      </div>
    </div>
  </div>

  <script>

    // CSSä¼ªç±»é€‰æ‹©å™¨ï¼šfocu: æ·¡å…¥æ·¡å‡ºï¼Œå…·ä½“çœ‹38è¡Œ

    // 1. è·å¾—ç„¦ç‚¹ï¼Œå¤±å»ç„¦ç‚¹ï¼Œæ˜¾ç¤ºå­—æ•°ç»Ÿè®¡æ–‡æœ¬
    const textare = document.querySelector('#tx')
    const total = document.querySelector('.total')
    const item = document.querySelector('.item')
    const text = document.querySelector('.info .text')
    
    textare.addEventListener('mouseenter', function(){
        total.style.opacity = 1
        textare.focus()
    })

    // textare.addEventListener('mouseleave', function(){
    //     total.style.opacity = 0
    //     textare.blur()
    // })

    // 2. è·å–ç”¨æˆ·è¾“å…¥æ–‡å­—æ¡†å†…çš„é•¿åº¦
    textare.addEventListener('input', function(){
        // console.log(textare.value.length);
        total.innerHTML = `${textare.value.length}/200å­—`
    })

    // ğŸ“•æ–°çŸ¥è¯†ç‚¹ï¼šäº‹ä»¶å¯¹è±¡
    // äº‹ä»¶æ˜¯ä¸ªå¯¹è±¡ï¼Œç”¨æˆ·ç‚¹å‡»åï¼Œäº§ç”Ÿäº†å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å“ªäº›å€¼å’Œæ–¹æ³•è¢«è§¦å‘
    // ğŸ“å¸¸ç”¨å±æ€§ï¼štype=äº‹ä»¶ç±»å‹ï¼ŒclientX/clientY=å…‰æ ‡åœ¨é¡µé¢çš„ä½ç½®ï¼Œ offsetX/offsetY=å…‰æ ‡åœ¨å½“å‰DOMç›’å­çš„ä½ç½®ï¼Œ key=ç”¨æˆ·æŒ‰ä¸‹çš„é”®ç›˜å€¼
    // å›è°ƒå‡½æ•°é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯äº‹ä»¶å¯¹è±¡(e,evt,event)

    const button = document.querySelector('button')
    button.addEventListener('click', function(e){
        console.log(e); 
        //åœ¨ä¸€å †valueé‡Œï¼Œæ¯”å¦‚æƒ³çŸ¥é“ç”¨æˆ·æ€ä¹ˆè§¦å‘ï¼Œå°±æ‰¾åˆ°typeï¼Œå°±ä¼šæ˜¾ç¤ºtype:'click'
    })

    textare.addEventListener('keyup', function(e){
    // 3. ç”¨æˆ·æŒ‰å›è½¦é”®ï¼Œå‘å¸ƒè¯„è®ºï¼Œæäº¤åæ¸…ç©ºæ–‡æœ¬æ¡†
        // å¦‚æœäº‹ä»¶å¯¹è±¡çš„keyæ˜¯enter,å°±ä¼šè¢«è§¦å‘
        if(e.key === 'Enter'){ //Enterè¦å¤§å†™
    // 4. å¦‚æœç”¨æˆ·è¾“å…¥çš„ä¸ºç©ºï¼Œåˆ™ä¸èƒ½æ¸²æŸ“åˆ°è¯„è®ºåŒºï¼›
    // å¦‚æœæ–‡å­—å‰åæœ‰ç©ºæ ¼ï¼Œåˆ™è‡ªåŠ¨å»é™¤ç©ºæ ¼ç¬¦ 
            if(textare.value.trim() !== ''){
            item.style.display = 'block'
            text.innerHTML = textare.value
        }
            textare.value = ''
    // 5. æŒ‰ä¸‹å›è½¦åï¼Œç»Ÿè®¡å­—æ•°çš„ä¹Ÿè¦å¤åŸ
            total.innerHTML = "0/200å­—"
        }
    })

    // ğŸ“•æ–°çŸ¥è¯†ç‚¹ï¼šéç©ºåˆ¤æ–­ï¼šå»æ‰å­—ç¬¦ä¸²å·¦å³ä¸¤ä¾§çš„ç©ºæ ¼:trim
    // è¯­æ³•ï¼š
    const str = "      peace "
    console.log(str); //        peace
    console.log(str.trim()); //peace






  </script>
</body>

</html>